(this["webpackJsonpcurrency-converter"]=this["webpackJsonpcurrency-converter"]||[]).push([[0],{11:function(e,t,n){e.exports={selectWrapper:"ConvertItem_selectWrapper__r2Kpr",selectList:"ConvertItem_selectList__p-o8a",value:"ConvertItem_value__2IGPJ"}},16:function(e,t,n){e.exports={wrapper:"ExchangeHistory_wrapper__396ot",content:"ExchangeHistory_content__1FqmU",list:"ExchangeHistory_list__3tHaE",btn:"ExchangeHistory_btn__2IgNZ",img:"ExchangeHistory_img__3bKWL"}},18:function(e,t,n){e.exports={item:"ExchangeItem_item__63RmR",exchange:"ExchangeItem_exchange__1oQy_"}},21:function(e,t,n){e.exports={headerWrapper:"Header_headerWrapper__nT88O",header:"Header_header__3xxdR",title:"Header_title__Dfbxb"}},22:function(e,t,n){e.exports={card:"Card_card__24A9V",title:"Card_title__cc3Fz",darck:"Card_darck__3NOkK"}},23:function(e,t,n){e.exports={item:"RateItem_item__Ch4xi",title:"RateItem_title__22_gf",value:"RateItem_value__Ff44S"}},28:function(e,t,n){e.exports={items:"ExchangeRates_items__3MvOV",status:"ExchangeRates_status__33_qw"}},37:function(e,t,n){e.exports={gridContainer:"Home_gridContainer__2C9qD"}},39:function(e,t,n){e.exports={content:"CurrencyConverter_content__1ub3W"}},41:function(e,t,n){e.exports={gridContainer:"Converter_gridContainer__1FAYc"}},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r,a=n(19),c=n.n(a),i=n(12),s=n(3),o=n(37),u=n.n(o),l=n(21),b=n.n(l),v=n.p+"static/media/logo.f54884f8.svg",j=n(1),d=function(){return Object(j.jsx)("div",{className:b.a.headerWrapper,children:Object(j.jsx)("div",{className:b.a.header,children:Object(j.jsxs)(i.b,{to:"/currency-converter/",children:[Object(j.jsx)("img",{src:v,alt:"\u041a\u0443\u0440\u0441 \u0432\u0430\u043b\u044e\u0442"}),Object(j.jsx)("h1",{className:b.a.title,children:"\u041a\u0443\u0440\u0441 \u0432\u0430\u043b\u044e\u0442"})]})})})},_=n(22),O=n.n(_),m=function(e){var t=e.title,n=e.isDarck,r=e.children;return Object(j.jsxs)("div",{className:"".concat(O.a.card," ").concat(n?O.a.darck:""),children:[Object(j.jsx)("h2",{className:O.a.title,children:t}),r]})},E=n(0),f=n.n(E),x=n(10),h=x.c,p=n(28),y=n.n(p),R=n(23),T=n.n(R),S=function(e){var t=e.name,n=e.abbreviation,r=e.rate;return Object(j.jsxs)("div",{className:T.a.item,children:[Object(j.jsxs)("h3",{className:T.a.title,children:[t,", ",n]}),Object(j.jsx)("div",{className:T.a.value,children:r})]})},C=n(38),g=n.n(C);!function(e){e.GET_RATES_STARTED="GET_RATES_STARTED",e.GET_RATES_SUCCESS="GET_RATES_SUCCESS",e.GET_RATES_ERROR="GET_RATES_ERROR"}(r||(r={}));var N,I=function(){return function(e){e({type:r.GET_RATES_STARTED});var t=["USD","EUR","GBP"];g.a.get("https://www.cbr-xml-daily.ru/daily_json.js").then((function(n){for(var a in n.data.Valute){var c=t.indexOf(a);-1!==c&&(t[c]={abbreviation:a,rate:n.data.Valute[a].Value,name:n.data.Valute[a].Name.slice(0,15)})}e({type:r.GET_RATES_SUCCESS,payload:[].concat(t)})})).catch((function(){e({type:r.GET_RATES_ERROR,payload:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043a\u0443\u0440\u0441\u043e\u0432"})}))}},A=function(){var e=Object(x.b)(),t=h((function(e){return e.rates})),n=t.currencies,r=t.isLoaded;return f.a.useEffect((function(){r||e(I())}),[]),Object(j.jsx)(m,{title:"\u041a\u0443\u0440\u0441 \u0432\u0430\u043b\u044e\u0442 \u0426\u0411 \u0420\u0424",children:r?Object(j.jsx)("div",{className:y.a.items,children:n.map((function(e,t){var n=e.name,r=e.abbreviation,a=e.rate;if("RUB"!==r)return Object(j.jsx)("div",{children:Object(j.jsx)(S,{name:n,abbreviation:r,rate:a})},t)}))}):Object(j.jsx)("div",{className:y.a.status,children:"\u041d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e"})})},H=n(16),G=n.n(H),U=n(18),L=n.n(U),V=function(e){var t=e.valuts;return Object(j.jsx)("div",{className:L.a.item,children:t&&t.map((function(e,n){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:L.a.exchange,children:[Object(j.jsx)("div",{className:L.a.value,children:parseFloat(e.value)}),Object(j.jsx)("div",{className:L.a.currency,children:e.currency})]},n),n!==t.length-1&&Object(j.jsx)("div",{children:"="})]})}))})},F=n.p+"static/media/exchange-history-img.67921b77.png",w=function(e,t){return{type:"CHANGE_CURRENCY",payload:{id:e,currency:t}}},Y=function(e){return{type:"FILTER_UNSELECTED_ITEMS",payload:e}},D=function(e,t){return{type:"CHANGE_VALUE",payload:{id:e,newValue:t}}},k=function(){var e=Object(x.b)();f.a.useEffect((function(){0===t.length&&e({type:"GET_HISTORY"})}),[]);var t=h((function(e){return e.converts.history}));return Object(j.jsx)(m,{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0438",isDarck:!0,children:Object(j.jsxs)("div",{className:G.a.wrapper,children:[Object(j.jsxs)("div",{className:G.a.content,children:[0!==t.length?Object(j.jsx)("ul",{className:G.a.list,children:t.map((function(e,t){return Object(j.jsx)("li",{children:Object(j.jsx)(V,{valuts:e})},t)}))}):Object(j.jsx)("div",{children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0443\u0441\u0442\u0430"}),Object(j.jsx)("div",{className:G.a.btn,children:Object(j.jsx)(i.b,{to:"/currency-converter/converter",children:Object(j.jsx)("div",{children:"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0440 \u0432\u0430\u043b\u044e\u0442"})})})]}),Object(j.jsx)("img",{className:G.a.img,src:F})]})})},W=n(39),B=n.n(W),J=n(11),M=n.n(J),q=function(e){var t=e.value,n=e.options,r=e.onSelect;return Object(j.jsxs)("select",{value:t.value,onChange:function(e){return r(e)},className:M.a.selectList,children:[Object(j.jsx)("option",{className:M.a.item,value:t.value,children:t.text}),n&&n.map((function(e,t){return Object(j.jsx)("option",{className:M.a.item,value:e.value,children:e.text},t)}))]})},K=function(e){var t=e.value,n=e.onInput;return Object(j.jsx)("input",{className:M.a.value,onChange:function(e){return n(e)},type:"number",value:t})},P=function(e){var t=e.value,n=e.onInput,r=e.currency,a=e.options,c=e.onSelect;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(K,{value:t,onInput:n}),Object(j.jsx)("div",{className:M.a.selectWrapper,children:Object(j.jsx)(q,{value:{value:r.abbreviation,text:"".concat(r.name,", ").concat(r.abbreviation)},options:a.map((function(e){return{value:e.abbreviation,text:"".concat(e.name,", ").concat(e.abbreviation)}})),onSelect:c})})]})},z=n(15),Q=n(40),Z=n(13),X=n(4),$={currencies:[{abbreviation:"RUB",rate:1,name:"\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0440\u0443\u0431\u043b\u044c"}],isLoaded:!1,error:null},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return t.type===r.GET_RATES_SUCCESS?Object(X.a)(Object(X.a)({},e),{},{currencies:[].concat(Object(Z.a)(e.currencies),Object(Z.a)(t.payload)),isLoaded:!0}):t.type===r.GET_RATES_ERROR?Object(X.a)(Object(X.a)({},e),{},{error:t.payload}):e};!function(e){e.CHANGE_CURRENCY="CHANGE_CURRENCY",e.FILTER_UNSELECTED_ITEMS="FILTER_UNSELECTED_ITEMS",e.CHANGE_VALUE="CHANGE_VALUE",e.CONVERT="CONVERT",e.SET_HISTORY="SET_HISTORY",e.GET_HISTORY="GET_HISTORY"}(N||(N={}));var te={items:[{value:0,currency:{abbreviation:"RUB",rate:0},isConvertable:!1},{value:0,currency:{abbreviation:"USD",rate:0},isConvertable:!1},{value:0,currency:{abbreviation:"EUR",rate:0},isConvertable:!1}],unselectedItems:[],history:[]},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;if(t.type===N.CHANGE_CURRENCY){var n=Object(Z.a)(e.items);return n[t.payload.id].currency=t.payload.currency,Object(X.a)(Object(X.a)({},e),{},{items:n})}if(t.type===N.FILTER_UNSELECTED_ITEMS){var r=e.items,a=t.payload;return Object(X.a)(Object(X.a)({},e),{},{unselectedItems:a.filter((function(e){var t=e.abbreviation;return!r.find((function(e){return e.currency.abbreviation===t}))}))})}if(t.type===N.CHANGE_VALUE){var c=Object(Z.a)(e.items);return c[t.payload.id].value=t.payload.newValue,c.forEach((function(e){return e.isConvertable=!1})),c[t.payload.id].isConvertable=!0,Object(X.a)(Object(X.a)({},e),{},{items:c})}if(t.type===N.CONVERT){var i=e.items,s=i.find((function(e){return!0===e.isConvertable}));if(!s)return e;var o=s.value,u=s.currency.rate,l=i.map((function(e){return e.isConvertable?e:Object(X.a)(Object(X.a)({},e),{},{value:"RUB"===s.currency.abbreviation?+(o/e.currency.rate).toFixed(2):+(o*u/e.currency.rate).toFixed(2)})}));return Object(X.a)(Object(X.a)({},e),{},{items:l})}if(t.type===N.SET_HISTORY){for(var b=[[{currency:e.items[0].currency.abbreviation,value:e.items[0].value},{currency:e.items[1].currency.abbreviation,value:e.items[1].value}],[{currency:e.items[0].currency.abbreviation,value:e.items[0].value},{currency:e.items[2].currency.abbreviation,value:e.items[2].value}],[{currency:e.items[1].currency.abbreviation,value:e.items[1].value},{currency:e.items[2].currency.abbreviation,value:e.items[2].value}]].concat(Object(Z.a)(e.history));b.length>10;)b.pop();return window.sessionStorage.setItem("history",JSON.stringify(b)),Object(X.a)(Object(X.a)({},e),{},{history:b})}if(t.type===N.GET_HISTORY){var v=JSON.parse(window.sessionStorage.getItem("history")||"[]");return Object(X.a)(Object(X.a)({},e),{},{history:v})}return e},re=Object(z.b)({rates:ee,converts:ne}),ae=Object(z.c)(Object(z.a)(Q.a)),ce=Object(z.d)(re,ae),ie=function(){var e=h((function(e){return e.converts.items})),t=h((function(e){return e.rates})),n=t.currencies,r=t.isLoaded,a=h((function(e){return e.converts.unselectedItems})),c=Object(x.b)(),i=function(e){e.forEach((function(t,n){n<e.length-1&&c(w(n,t))})),c(Y(e))};return f.a.useEffect((function(){if(r)i(n);else{var e;c(I());var t=ce.subscribe((function(){var n=e;e=ce.getState().rates.isLoaded;var r=ce.getState().rates.currencies;n!==e&&i(r),t()}))}}),[]),Object(j.jsx)(m,{title:"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440 \u0432\u0430\u043b\u044e\u0442",children:Object(j.jsx)("div",{className:B.a.content,children:e.map((function(t,r){return Object(j.jsx)(P,{value:t.value,onInput:function(n){c(D(r,+n.target.value)),+n.target.value?(c({type:"CONVERT"}),c({type:"SET_HISTORY"})):e.forEach((function(e,n){e!==t&&c(D(n,0))}))},currency:t.currency,options:a,onSelect:function(e){var a=n.find((function(t){return t.abbreviation===e.target.value}));c(w(r,a)),c(Y(n)),t.value&&(c({type:"CONVERT"}),c({type:"SET_HISTORY"}))}})}))})})},se=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d,{}),Object(j.jsxs)("div",{className:u.a.gridContainer,children:[Object(j.jsx)(A,{}),Object(j.jsx)(k,{})]})]})},oe=n(41),ue=n.n(oe),le=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d,{}),Object(j.jsx)("div",{className:ue.a.gridContainer,children:Object(j.jsx)(ie,{})})]})},be=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.a,{path:"/currency-converter/",render:function(){return Object(j.jsx)(se,{})},exact:!0}),Object(j.jsx)(s.a,{path:"/currency-converter/converter",render:function(){return Object(j.jsx)(le,{})},exact:!0})]})};n(70),n(71);c.a.render(Object(j.jsx)(x.a,{store:ce,children:Object(j.jsx)(i.a,{children:Object(j.jsx)(be,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.3d57ef9f.chunk.js.map